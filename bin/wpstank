#!/usr/bin/env node

var program = require('commander')
    , WPStank = require('../src/wpstank')
    , stank = new WPStank ;

program
    .version('0.0.0')
    .option('-g, --generate', 'Generate a file')
    .option('-d, --destroy', 'Delete a file')
    .option('-p, --post-type [type]', 'Post Type')
    .option('-s, --shortcode [type]', 'Shortcode')
    .option('-t, --taxonomy [type]', 'Taxonomy');

program
    .command('init')
    .description('Setup stank')
    .action(function(){
        console.log( "initializing..." );
        stank.init();
    });

program.parse( process.argv );

// The main post types
var types = [ 'postType', 'taxonomy', 'shortcode' ];

for( i = 0; i < types.length; i++ ) {
    var type = types[i];
    if( program[type] ) {
        // Is a type specified?
        if( program[type] === true ) return console.log( "No " + type + " was specified" );
        if( program.generate ) stank.create( program[type], type ); 
        if( program.destroy ) stank.destroy( program[type], type ); 
    }
}
